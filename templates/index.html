<!DOCTYPE html>
<html lang="en">
<head>
    <link
        crossorigin="anonymous"
        referrerpolicy="no-referrer"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        media="print"
        onload="this.media='all'"
    ></link>
    <title>dm creations - Home</title>
    {% for data_src in threejs_drawings %}
        <meta name="datasrc" content="{{ data_src }}"></meta>
        {% if data_src == "music" %}
        <meta name="music" content="true"></meta>
        {% endif %}
    {% endfor %}
    <meta name="description" content="Personal website of Darren MacKenzie, a software developer and solution architect."></meta>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
    <script type="importmap">
        {
            "imports":
                {
                    "three": "https://cdn.jsdelivr.net/npm/three@__THREEJS_VERSION__/build/three.module.js",
                    "textgeometry": "https://cdn.jsdelivr.net/npm/three@__THREEJS_VERSION__/examples/jsm/geometries/TextGeometry.js",
                    "fontloader": "https://cdn.jsdelivr.net/npm/three@__THREEJS_VERSION__/examples/jsm/loaders/FontLoader.js",
                    "orbitcontrols": "https://cdn.jsdelivr.net/npm/three@__THREEJS_VERSION__/examples/jsm/controls/OrbitControls.js"
                }
        }
    </script>
    <link rel="stylesheet" href="/style.css"></link>
</head>
<body>
    <div class="layout">
        <header class="header">
            <div class="header-left">
                <h1>Darren MacKenzie</h1>
                <p class="subtitle">Software developer and solution architect.</p>
                <a href="https://tech.jfdmconsulting.com">
                    <img src="https://tech.jfdmconsulting.com/wp-content/uploads/sites/2/2022/10/JFDM-Tech-Front-Page-2048x391.png" alt="JFDM Tech Consulting company logo" style="height: 39px; width: 205px" />
                </a>
            </div>
            <nav class="header-right">
                <ul>
                    {% for entry in menu %}<li><a href="{{ entry.url }}" aria-label="{{ entry.title }}">{{ entry.title }}</a></li>{% endfor %}
                    <li><a href="https://github.com/darren277" aria-label="My GitHub profile"><i class="fa-brands fa-github"></i> GitHub</a></li>
                    <li><a href="#contact" id="contactbutton" class="btn" aria-label="Contact form below">Contact</a></li>
                </ul>
            </nav>
        </header>

        <main class="main-grid">
            <div class="service blogarticles" id="blogarticles">
                <div class="title"><h2>Blog</h2></div>
                {% if not articles %}
                <div class="centered-text">
                    <h3>You've reached the end.</h3>
                    <h4><a href="javascript:history.back()">Go Back</a></h4>
                </div>
                {% endif %}
                <div class="cards">
                    {% for article in articles %}
                    <div class="card">
                        <div class='icons'>{% for icon in article.icons %}<a href='/icons/{{icon}}'><i class='{{icon}}'></i></a>{{ ' ' if not loop.last else '' }}{% endfor %}</div>
                        <div class='tags'>{% for tag in article.tags %}<a href='/tags/{{tag}}'><span class='tag'>{{tag}}</span></a>{{ ' ' if not loop.last else '' }}{% endfor %}</div>
                        <div class="pra title-and-description">
                            <h3 class="card-title">{{ article.title }}</h3>
                            <p class="date">{{ article.created | datetime }}</p>
                            {% if article.thumbnail %}<img src="{{ article.thumbnail }}"></img>{% endif %}
                            <p style="text-align: center;">{{ article.description }}</p>
                        </div>
                        <div class="pra button-wrapper"><a class="button" href="{{ article.url }}" aria-label="Read more about {{ article.url | url_to_descriptive }}">Read More <span class="sr-only">about {{ article.url | url_to_descriptive }}</span></a></div>
                    </div>
                    {% endfor %}
                </div>
            </div>

            <section class="threejs">
                <h1>Three JS</h1>
                <div class="threejs-container">
                    <div id="c"></div>
                    <div id="ui-container">
                        <button id="orbit-toggle-btn">Orbit: ON</button>
                        <label for="zoom-slider">Zoom:</label>
                        <input type="range" id="zoom-slider" min="1" max="100" value="5" step="1"/>
                        <label for="tempo-slider">Tempo:</label>
                        <input id="tempo-slider" type="range" min="0.25" max="2.0" value="1" step="0.01" />
                        <span id="tempo-value">1.00x</span>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>Darren MacKenzie</p>
            <div class="social">
                {% for entry in social %}
                <a href="{{ entry.url }}" aria-label="{{ entry.icon | icon_to_descriptive }}">
                    <i class="{{ entry.icon }}"></i>
                </a>
                {% endfor %}
            </div>
        </footer>
    </div>

    <script>
        // Function to load the Three.js script
        function updateUI() {
            const zoomSlider = document.getElementById('zoom-slider');
            const tempoSlider = document.getElementById('tempo-slider');
            const tempoValue = document.getElementById('tempo-value');

            const musicBool = document.querySelector('meta[name="music"]');

            if (musicBool) {
                tempoSlider.style.display = 'block';
                tempoValue.style.display = 'block';
            } else {
                tempoSlider.style.display = 'none';
                tempoValue.style.display = 'none';
            }
        }

        // Check if the page is fully loaded before executing the script
        window.addEventListener('load', () => {
            updateUI();
        });

        // Three.js and other scripts remain unchanged
        window.addEventListener('load', () => {
            const threeScript = document.createElement('script');
            threeScript.type = 'module';
            threeScript.src = '/scripts/main.js';
            document.body.appendChild(threeScript);
        });
    </script>
</body>
</html>